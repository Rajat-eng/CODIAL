let successFlash=function(e){new Noty({theme:"mint",text:e,type:"alert",layout:"topRight",timeout:1500}).show()},errorFlash=function(e){new Noty({theme:"mint",text:e,type:"error",layout:"topRight",timeout:1500}).show()};class PostComments{constructor(e){this.postId=e,this.postContainer=$(`#post-${e}`),this.newCommentForm=$(`#post-${e}-comments-form`),this.createComment(e);let t=this;$(" .delete-comment-button",this.postContainer).each(function(){t.deleteComment($(this))})}createComment(e){let t=this;this.newCommentForm.submit(function(n){n.preventDefault();$.ajax({type:"post",url:"/comments/create",data:$(this).serialize(),success:function(n){let o=t.newCommentDom(n.data.comment);$(`#post-comments-${e}`).prepend(o),t.deleteComment($(" .delete-comment-button",o)),successFlash(n.message),new ToggleLike($(" .like-btn-link",o))},error:function(e){console.log(e.responseText),errorFlash(err.responseText)}})})}newCommentDom(e){return $(`<li id="comment-${e._id}" class="comment-display">\n        <p>\n        ${e.content}\n      <br>\n        ${e.user.name}\n      </p>\n      \n     <div class="comment-btns">\n         \n              <a href="/likes/toggle/?id=${e._id}&type=Comment" data-likes="${e.likes.length}" class="like-btn-link">\n                  <button class='like-btn' ><span id='like-count-${e._id}-Comment'>${e.likes.length}</span> &nbsp <i class="fa-solid fa-heart"></i> </button>\n              </a>   \n          \n              <a href="/comments/destroy/${e._id}" class="delete-comment-button">\n                  <button class='delete-comment-btn' >Delete</button>\n              </a>\n          \n     </div>\n                </li>`)}deleteComment(e){$(e).click(function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#comment-${e.data.comment_id}`).remove(),successFlash(e.message)},error:function(e){console.log(error.responseText),errorFlash(e.responseText)}})})}}